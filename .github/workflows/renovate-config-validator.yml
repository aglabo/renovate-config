#==============================================================================
# Renovate Config Validator
#==============================================================================
# Purpose:
#   Validates Renovate configuration file (default.json)
#
# Triggers:
#   - Pull requests that modify default.json
#   - Manual workflow dispatch
#
# Requirements:
#   - Node.js 22
#   - renovate package (devDependency)
#
# Copyright (c) 2025 atsushifx <https://github.com/atsushifx>
# License: MIT - https://opensource.org/licenses/MIT
#==============================================================================

name: Renovate Config Validator

on:
  pull_request:
    paths:
      - "default.json"
  workflow_dispatch:

jobs:
  validate:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    timeout-minutes: 10

    steps:
      # Check out the repository
      - name: Checkout Repository
        uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6
        with:
          persist-credentials: false

      # Set up Node.js environment
      - name: Setup Node.js
        uses: actions/setup-node@395ad3262231945c25e8478fd5baf05154b1d79f # v6
        with:
          node-version: "22"

      # Install development dependencies (no package-lock.json required)
      - name: Install devDependencies
        run: npm install --only=dev

      # Run Renovate config validation
      - name: Validate Renovate Config
        run: npm run validate-config
